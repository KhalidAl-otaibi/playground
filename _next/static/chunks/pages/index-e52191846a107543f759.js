(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{4612:function(n,e,t){"use strict";t.r(e),t.d(e,{default:function(){return m}});var i=t(6952),r=t(8742),o=t.n(r),a=t(2547),u=t(6695),s=t(8617),l=t(7378),c=t(4246),d=t(7061),h=(0,s.default)((function(){return Promise.all([t.e(90),t.e(329)]).then(t.bind(t,2329))}),{ssr:!1,loadableGenerated:{webpack:function(){return[2329]},modules:["index.tsx -> react-ace"]}}),v={python:'print("Hello, Python!")',cpp:'\n  #include <iostream>\n  int main() {\n      std::cout << "Hello, CPP!\\n";\n      return 0;\n  }'.trim(),haskell:'\n  main = putStrLn "Hello, Haskell!"\n  '.trim(),java:'\n  public class Main {\n    public static void main(String[] unused) {\n      System.out.println("Hello, Java!");\n    }\n  }\n  '.trim(),julia:'print("Hello, Julia!")',r:'cat("Hello, R!")'},f={python:"main.py",cpp:"main.cpp",haskell:"main.hs",java:"Main.java",julia:"main.jl",r:"main.R"},p=function(){var n=(0,u.useGoogleLogin)(),e=n.isSignedIn,t=n.auth;return n.ready?(0,c.jsx)("button",{onClick:function(){return e?null===t||void 0===t?void 0:t.signOut():null===t||void 0===t?void 0:t.signIn()},children:e?"Signout":"Signin"}):null},g=function(){var n=(0,l.useState)(""),e=n[0],t=n[1],r=(0,l.useState)("python"),u=r[0],s=r[1],d=(0,l.useState)(),p=d[0],g=d[1],m=(0,a.usePlayground)().run,y=(0,l.useRef)(),j=(0,l.useState)(!1),x=j[0],b=j[1],P=(0,l.useCallback)((0,i.Z)(o().mark((function n(){var e,t,i,r;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(y.current){n.next=2;break}return n.abrupt("return");case 2:if(""!==(e=y.current.getValue()).trim()){n.next=6;break}return g(void 0),n.abrupt("return");case 6:return t=f[u],i={image:"cs124/playground-".concat(u),filesystem:[{path:t,contents:e}]},n.prev=8,b(!0),n.next=12,m(i,!0);case 12:(r=n.sent).timedOut?g({error:"Timeout"}):g({result:r}),n.next=19;break;case 16:n.prev=16,n.t0=n.catch(8),g({error:n.t0.toString()});case 19:return n.prev=19,b(!1),n.finish(19);case 22:case"end":return n.stop()}}),n,null,[[8,16,19,22]])}))),[u,m]),S=(0,l.useMemo)((function(){var n;return(null===p||void 0===p?void 0:p.error)||(null===p||void 0===p||null===(n=p.result)||void 0===n?void 0:n.outputLines.map((function(n){return n.line})).join("\n"))||""}),[p]),_=(0,l.useMemo)((function(){return[{name:"gotoline",exec:function(){return!1},bindKey:{win:"",mac:""}},{name:"run",bindKey:{win:"Ctrl-Enter",mac:"Ctrl-Enter"},exec:function(){return P()},readOnly:!0},{name:"close",bindKey:{win:"Esc",mac:"Esc"},exec:function(){return g(void 0)},readOnly:!0}]}),[P]);return(0,l.useEffect)((function(){_.forEach((function(n){var e;y.current&&(null===(e=y.current)||void 0===e||e.commands.addCommand(n))}))}),[_]),(0,l.useEffect)((function(){var n;t(null!==(n=v[u])&&void 0!==n?n:""),g(void 0)}),[u]),(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(h,{mode:u,theme:"github",width:"100%",height:"16rem",minLines:16,maxLines:1/0,value:e,showPrintMargin:!1,onBeforeLoad:function(n){n.config.set("basePath","https://cdn.jsdelivr.net/npm/ace-builds@".concat(n.version,"/src-min-noconflict"))},onLoad:function(n){y.current=n},onChange:t,commands:_,setOptions:{tabSize:2}}),(0,c.jsxs)("div",{style:{marginTop:8},children:[(0,c.jsx)("button",{onClick:function(){P()},style:{marginRight:8},children:"Run"}),(0,c.jsx)("div",{style:{float:"right"},children:(0,c.jsxs)("select",{id:"language",onChange:function(n){return s(n.target.value)},value:u,children:[(0,c.jsx)("option",{value:"python",children:"Python"}),(0,c.jsx)("option",{value:"cpp",children:"C++"}),(0,c.jsx)("option",{value:"java",children:"Java"}),(0,c.jsx)("option",{value:"haskell",children:"Haskell"}),(0,c.jsx)("option",{value:"julia",children:"Julia"}),(0,c.jsx)("option",{value:"r",children:"R"})]})})]}),(0,c.jsx)("div",{className:"output",children:x?(0,c.jsx)("span",{children:"Running..."}):void 0!==S?(0,c.jsx)("span",{children:S}):(0,c.jsx)("span",{})}),(null===p||void 0===p?void 0:p.result)&&(0,c.jsx)(h,{readOnly:!0,theme:"github",mode:"json",height:"32rem",value:JSON.stringify(p.result,null,2)})]})};function m(){return(0,c.jsx)(u.GoogleLoginProvider,{clientConfig:{client_id:d.env.NEXT_PUBLIC_GOOGLE_CLIENT_ID},children:(0,c.jsx)(u.WithGoogleTokens,{children:function(n){var e=n.idToken;return(0,c.jsxs)(a.PlaygroundProvider,{googleToken:e,server:"https://cloud.cs124.org/playground",children:[(0,c.jsx)("h1",{children:(0,c.jsx)("kbd",{children:"playground"})}),(0,c.jsxs)("p",{children:["Visit the ",(0,c.jsx)("a",{href:"https://github.com/cs124-illinois/playground",children:"project homepage"})]}),(0,c.jsx)("h2",{children:"Playground Demo"}),(0,c.jsx)("div",{style:{marginBottom:8},children:(0,c.jsx)(p,{})}),(0,c.jsx)(g,{})]})}})})}},4423:function(n,e,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(4612)}])},2547:function(n,e,t){var i=this&&this.__createBinding||(Object.create?function(n,e,t,i){void 0===i&&(i=t),Object.defineProperty(n,i,{enumerable:!0,get:function(){return e[t]}})}:function(n,e,t,i){void 0===i&&(i=t),n[i]=e[t]}),r=this&&this.__setModuleDefault||(Object.create?function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}:function(n,e){n.default=e}),o=this&&this.__importStar||function(n){if(n&&n.__esModule)return n;var e={};if(null!=n)for(var t in n)"default"!==t&&Object.prototype.hasOwnProperty.call(n,t)&&i(e,n,t);return r(e,n),e},a=this&&this.__awaiter||function(n,e,t,i){return new(t||(t=Promise))((function(r,o){function a(n){try{s(i.next(n))}catch(e){o(e)}}function u(n){try{s(i.throw(n))}catch(e){o(e)}}function s(n){var e;n.done?r(n.value):(e=n.value,e instanceof t?e:new t((function(n){n(e)}))).then(a,u)}s((i=i.apply(n,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.PlaygroundContext=e.usePlayground=e.PlaygroundProvider=void 0;const u=t(8741),s=o(t(7378));e.PlaygroundProvider=({googleToken:n,server:t,children:i})=>{const[r,o]=(0,s.useState)(void 0);(0,s.useEffect)((()=>{fetch(t).then((n=>n.json())).then((n=>o(n.status))).catch((()=>o(void 0)))}),[t]);const l=(0,s.useCallback)(((e,i=!1)=>a(this,void 0,void 0,(function*(){e=i?u.Submission.check(e):e;const r=yield fetch(t,{method:"post",body:JSON.stringify(e),headers:Object.assign({"Content-Type":"application/json"},n&&{"google-token":n})}).then((n=>a(this,void 0,void 0,(function*(){if(200===n.status){const e=yield n.json();return o(e.status),e}throw yield n.text()})))).catch((n=>{throw o(void 0),n}));return i?u.Result.check(r):r}))),[n,t]);return s.default.createElement(e.PlaygroundContext.Provider,{value:{available:!0,status:r,connected:void 0!==r,run:l}},i)};e.usePlayground=()=>(0,s.useContext)(e.PlaygroundContext),e.PlaygroundContext=s.default.createContext({available:!1,connected:!1,status:void 0,run:()=>{throw new Error("Playground context not available")}})},8741:function(n,e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.Status=e.Result=e.Submission=e.FakeFile=e.OutputLine=e.Console=void 0;const i=t(4690);e.Console=(0,i.Union)((0,i.Literal)("STDOUT"),(0,i.Literal)("STDERR")),e.OutputLine=(0,i.Record)({console:e.Console,timestamp:i.String.withConstraint((n=>!isNaN(Date.parse(n)))),line:i.String}),e.FakeFile=(0,i.Record)({path:i.String,contents:i.String}),e.Submission=(0,i.Record)({image:i.String}).And((0,i.Partial)({filesystem:(0,i.Array)(e.FakeFile),timeout:i.Number})),e.Result=(0,i.Record)({started:i.String.withConstraint((n=>!isNaN(Date.parse(n)))),ended:i.String.withConstraint((n=>!isNaN(Date.parse(n)))),outputLines:(0,i.Array)(e.OutputLine),timedOut:i.Boolean,exitValue:i.Number}),e.Status=(0,i.Record)({started:i.String.withConstraint((n=>!isNaN(Date.parse(n)))),version:i.String})}},function(n){n.O(0,[774,799,888,179],(function(){return e=4423,n(n.s=e);var e}));var e=n.O();_N_E=e}]);